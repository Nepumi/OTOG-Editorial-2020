# ข้อ 356 วาระสิ้นโลก

เป็นข้อที่ให้ลองฝึกการไล่ตาราง 2 มิติ ซึ่งตอนนี้ควรจะทำได้แล้วนะครับ อิอิ

## Problem
ให้ตารางขนาด R แถว C คอลัมน์ โดยจะประกอบไปด้วยตัวอักษร 2 ตัว ก็คือ 
* 'X' แทนว่าในช่องนั้นเป็น**แผ่นดิน**
* '.' แทนว่าในช่องนั้นเป็น**น้ำ**

โดยน้ำจะท่วมแผ่นดินหากแผ่นดินนั้นมีช่องรอบ ๆ (บน-ล่าง-ซ้าย-ขวา) ที่ติดกันเป็นน้ำทะเลอย่างน้อย 3 ช่องขึ้น
ไป โดยจะพิจารณาจากแผนที่เริ่มต้นเท่านั้น

เมื่อน้ำท่วมแผ่นดินเสร็จแล้วจะเกิดภาวะโลกถล่มต่อ กล่าวคือ โลกจะเหลือเป็นรูป**สี่เหลี่ยมมุมฉากขนาดเล็ก
ที่สุด**ที่สามารถครอบคลุมแผ่นดินที่หลงเหลือทั้งหมด

งานของคุณ คือ จงเขียนโปรแกรมเพื่อหาแผ่นดินที่หลงเหลือจากวาระสิ้นโลก 

## Solution
ลองสังเกตดีๆจะเห็นว่า ตารางสูงสุดจะอยู่ที่ไม่เกิน 10 x 10 ดังนั้น ไล่โง่ๆไปเลย
โดยการเช็คว่าช่องนั้นเป็น**ดินหรือเปล่า** และ **ทั้ง บน-ล่าง-ซ้าย-ขวา ที่ติดกันเป็นน้ำทะเลอย่างน้อย 3 ช่องขึ้นหรือเปล่า** แล้วค่อยทำการ Mark ว่ามันจะจมหรือไม่

ตอนนี้จะได้ตารางประมาณแบบนี้

![ตารางที่ไล่โง่ๆแล้ว](https://github.com/Nepumi/OTOG-Editorial-2020/blob/master/16-We%20need%20to%20go%20DEEPER/IMAGE/F.png?raw=true)

> แล้วเราจะตีกรอบสีเขียวยังไงละ

ไม่ยาก แค่เราต้องหา**ขอบเขต**ของพื้นที่ๆยังรอดอยู่

> How

ทำการไล่อีกครั้งและดูว่า ตำแหน่ง**ซ้ายสุด**คือเท่าไหร่ **ขวาสุด**คือเท่าไหร่ **บทสุดกับล่างสุด**ก็เช่นกัน
* ซึ่ง **ซ้ายสุด**ก็เก็บโดยการดูว่า ระหว่าง {ค่าซ้ายสุดอันเก่า} กับ {ตำแหน่งคอลลัมน์(ซ้ายขวา)ในช่องที่**ยังมีแผ่นดินอยู่**} ว่าอันไหน**น้อยกว่า**
* **ขวาสุด**ก็เก็บโดยการดูว่า ระหว่าง {ค่าขวาสุดอันเก่า} กับ {ตำแหน่งคอลลัมน์(ซ้ายขวา)ในช่องที่**ยังมีแผ่นดินอยู่**} ว่าอันไหน**มากกว่า**
* บนกับล่างก็ลองคิดเอาเองนะ :)

## Solution Code

```c
#include<stdio.h>
#define MIN(a,b)  (a<b) ?a:b//เก็บค่าน้อย
#define MAX(a,b)  (a>b) ?a:b//เก็บค่ามาก

char MAP[12][12];//แผนที่
int LIVE[12][12];//เอาไว้เก็บว่าในช่องนั้นๆ เมื่อน้ำท่วมแล้ว จะยังมีแผนดินหรือเปล่า
//โดย 1 คือมี  0 คือบ่มี

int min_i = 20,min_j=20,max_i=-1,max_j=-1;
//ประกาศเอาไว้ตีกรอบไปก่อน
//ทำไม min ต้องเป็น 20?
//เพราะค่า min คือค่าที่น้อยที่สุด ดังนั้นเวลาเรื่มต้นก็ต้องเอาค่ามากๆไว้ก่อน ดังนั้นเปลี่ยนเป็น 35 ก็ไม่มีปัก็ไม่มีปัญหา
//เหมือนกันกับค่า max คือค่าที่มากที่สุด ดังนั้นเวลาเรื่มต้นก็ต้องเอาค่าน้อยๆไว้ก่อน

int main(){

	int n,m;scanf("%d %d",&n,&m);//รับขนาด
	for(int i=0;i<n;i++)scanf("%s",MAP[i]);//รับแผนที่ทุกๆบรรทัด

	//ไล่ดูแผนที่
	for(int i=0;i<n;i++){
		for(int j=0;j<m;j++){
			if (MAP[i][j]=='.')LIVE[i][j] = 0;//ถ้ามันจมอยู่แล้วก็ให้จมต่อไป
			else{//แต่ถ้าไม่(มันก็คือแผ่นดินแหละ)
				int crt = 0;//นับว่ารอบๆแผ่นดินนั้นมีน้ำอยู่กี่อัน

				if(i-1>=0 && MAP[i-1][j]=='.')crt++;//ถ้า ดูอันด้านบนได้และเป็นน้ำก็บวกไปเล้ย
				if(j-1>=0 && MAP[i][j-1]=='.')crt++;//ถ้า ดูอันด้านซ้ายได้และเป็นน้ำก็บวกไปเล้ย
				if(i+1<n && MAP[i+1][j]=='.')crt++;//ถ้า ดูอันด้านล่างได้และเป็นน้ำก็บวกไปเล้ย
				if(j+1<m && MAP[i][j+1]=='.')crt++;//ถ้า ดูอันด้านขวาได้และเป็นน้ำก็บวกไปเล้ย

				
				if (crt>=3)LIVE[i][j] = 0;//ถ้าน้ำทะเลรอบๆมีจำนวนมากกว่า 3 ก็คือ จม F
				else LIVE[i][j] = 1;//ส่วนตรงข้ามก็แปลว่า พื้นที่นั้นรอด

			}

		}
	}

	//It's time to ตีกรอบ
	
	for(int i=0;i<n;i++){
		for(int j=0;j<m;j++){
			if(LIVE[i][j]==1){
				min_i = MIN(min_i,i);
				min_j = MIN(min_j,j);
				//ไรไปและตีกรอบซะ

				max_i = MAX(max_i,i);
				max_j = MAX(max_j,j);
				//ไรไปและตีกรอบซะ
			}
		}
	}

	//คล่าวนี้ แทนที่จะไล่ทั้งหมด ก็ไล่แค่ส่วนที่ตีกรอบ
	for(int i=min_i;i<=max_i;i++){
		for(int j=min_j;j<=max_j;j++){
			if(LIVE[i][j]==1)printf("X");//ถ้ารอดก็แปลว่าเป็นแผ่นดิน
			else printf(".");//ถ้าไม่ใช่ก็แปล่ามันคือทะเล
		}
		printf("\n");//เว้นบรรทัดจ้าา
	}

	return 0;

}

```
งิ
